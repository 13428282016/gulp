define(["jquery","clib/modal","clib/player","common/utils"],function(i,n,t,o){var a={container:"_player",width:"100%",height:"100%",title:"视频欣赏",flashVars:{id:"PlayerCtrl",mid:""}},e=function(n){function e(i){t.printObject(s.options.container,s.options.width,s.options.height,s.options.flashVars),c=(new Date).getTime()}function d(i){t.destroyObject(),p=!0,c=""}var s=this;this.options=i.extend(!0,{},a,n),this.dialogEvents={},this.$dialog=null;var r='<div class="pop" style="display:;width:896px;margin-left:-466px;"><h2>视频欣赏</h2><a class="btn_close" href="javascript:void(0)" title="关闭" target="_self">关闭弹窗</a><div class="pop_inner"><div id="'+this.options.container+'"class="pop_video" style="width:850px;height:450px;"></div><div class="error" style="display:none;width:850px;height:450px;" id="playerError"></div></div></div>';this.init=function(n){window.swfobject?s.$dialog||(s.$dialog=i(r).hide().appendTo(i("body")),s.$dialog.data("talentPlayer",s),s.$dialog.on("beforeOpen",e),s.$dialog.on("afterClose",d),l.init(s.$dialog),i.isFunction(n)&&n()):require(["http://js.kankan.xunlei.com/js/sbase.js"],function(){s.init(n)})},this.on=function(i,n){var t;i.startsWith("dlg")&&(t=s.dialogEvents);var o=i.substring(i.indexOf(".")+1);t[o]=n,s.$dialog&&s.$dialog.on(o,n)},this.play=function(i,n){return s.options.flashVars.mid=i,s.options.title=n,s.$dialog?void s.openDialog():void s.init(s.openDialog)},this.openDialog=function(){s.$dialog&&(l.initData(),s.$dialog.modal("open"))},this.closeDialog=function(){s.$dialog&&s.$dialog.modal("close")};var p=!0,c="";t.on("onOpen",function(){o.sendKkpgvC("player","vopen",t.videoID,c)}),t.on("onPlaying",function(){p&&(o.sendKkpgvC("player","vplay",t.videoID,c),p=!1)}),t.on("onEnd",function(){o.sendKkpgvC("player","vend",t.videoID,c)})},l={$dialog:null,init:function(i){var n=i.data("talentPlayer"),t=i.find(".cancel-btn ,.btn_close");t.click(function(){i&&n.closeDialog()}),this.$dialog=i},initData:function(){if(this.$dialog){var i=this.$dialog.data("talentPlayer");this.$dialog.find("h2").text(i.options.title)}}};return e});
//# sourceMappingURL=../../maps/js/common/talent_player.js.map
//# sourceMappingURL=../../maps/js/common/talent_player.js.map
//# sourceMappingURL=../../js/maps/js/common/talent_player.js.map