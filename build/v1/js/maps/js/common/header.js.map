{"version":3,"names":[],"mappings":"","sources":["js/common/header.js"],"sourcesContent":["define([\"jquery\",\"common/utils\"],function(n,i){function e(){if(u.refresh(!0),\"function\"==typeof u.gLoginSuccess)try{u.gLoginSuccess()}catch(i){}try{n(\"#\"+s).css(\"left\",\"\")}catch(i){}}function o(){if(u.refresh(!0),\"function\"==typeof u.gAutoLoginSuccess)try{u.gAutoLoginSuccess()}catch(n){}}function t(){if(\"function\"==typeof u.gLoginClose)try{u.gLoginClose()}catch(i){}try{n(\"#\"+s).css(\"left\",\"\")}catch(i){}}function c(){if(u.refresh(!1),\"function\"==typeof u.gLogoutSuccess)try{u.gLogoutSuccess()}catch(n){}}var s=\"playerbox\",u={},l={login:[],logout:[],check_backend:[]};return u.on=function(n,i){l[n]||(l[n]=[]),l[n].push(i)},u.trigger=function(i,e){if(l[i])for(var o,t=0,c=l[i].length;c>t;t++)o=l[i][t],n.isFunction(o)&&o(e)},u.addLoginCallback=function(n){u.on(\"login\",n)},u.addLogoutCallback=function(n){u.on(\"logout\",n)},u.addCheckBackendCallback=function(n){u.on(\"check_backend\",n)},u.autoLogin={init:function(){require([\"http://u.kankan.com/login/1.0.4.min.js\"],function(){xlQuickLogin.init({loginID:\"107\",autoClientLogin:!0,closeFunc:function(){try{t()}catch(n){}},loginFunc:function(){try{e()}catch(n){}},loginedFunc:function(){try{o()}catch(n){}},logoutFunc:function(){try{c()}catch(n){}}})})}},u.userInfo={userid:0,nick_name:\"\",is_vip:0,is_star:0,is_investor:0,logined:0,login:function(){var n=i.cookie.get(\"userid\"),e=i.cookie.get(\"sessionid\");this.userid=n?n:0,this.userid>0&&\"\"!=e&&(this.nick_name=decodeURIComponent(i.cookie.get(\"usernick\")),this.logined=1),this.checkBackend(),u.trigger(\"login\")},logout:function(){var n=i.cookie;n.del(\"usernewno\"),n.del(\"sessionid\"),n.del(\"state\"),n.del(\"logintype\"),n.del(\"upgrade\"),n.del(\"userid\"),n.del(\"jumpkey\"),n.del(\"score\"),n.del(\"isvip\"),n.del(\"deviceid\"),n.del(\"usernick\"),n.del(\"_x_t\"),n.del(\"usertype\"),n.del(\"usrname\"),n.del(\"shapsw\"),n.del(\"lsessionid\"),n.del(\"luserid\"),n.del(\"nickname\"),n.del(\"uservip\"),this.userid=0,this.nick_name=\"\",this.is_vip=0,this.is_star=0,this.is_investor=0,this.logined=0,delete this.star_info,delete this.hit_info,u.trigger(\"logout\"),u.trigger(\"check_backend\")},setNick:function(n){n&&(this.nick_name=n)},checkBackend:function(){var i=this,e=\"http://backend.star.kankan.com/userchecker?jsoncallback=?\";n.getJSON(e,function(e){200==e.status&&(n.extend(i,e.data),u.trigger(\"check_backend\"))})}},u.login={dialog:\"login_dialog.html\",logout:function(){return\"undefined\"==typeof window.xlQuickLogin?void setTimeout(function(){u.login.logout()},100):void xlQuickLogin.logout()},show:function(){if(\"undefined\"==typeof window.xlQuickLogin)return void setTimeout(function(){u.login.show()},100);xlQuickLogin.login(),\"function\"==typeof u.gLoginBefore&&u.gLoginBefore();try{n(\"#\"+s).css(\"left\",\"-9999em\")}catch(i){}}},u.refresh=function(n){n?u.userInfo.login():u.userInfo.logout()},u});\n//# sourceMappingURL=../../maps/js/common/header.js.map\n//# sourceMappingURL=../../maps/js/common/header.js.map"],"file":"js/common/header.js","sourceRoot":"/source/"}