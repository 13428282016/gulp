{"version":3,"names":[],"mappings":"","sources":["js/app.js"],"sourcesContent":["define([\"jquery\",\"clib/modal\",\"common/validate\",\"common/utils\",\"common/pay\",\"common/tip\"],function(t,i,o,n,s,a){function e(t){alert(t.data.msg)}function r(t){var i=this;203==t.status?i.openPayTipDialog():alert(t.data.msg)}var l=function(i){this.dialogEvents={},this.options=t.extend(!0,{},l.defaults,i),this.options.dialog&&(this.setDialog(this.options.dialog),p.init(this.$dialog)),\"object\"==typeof this.options.target&&(this.target=this.options.target),this.info={}};l.defaults={urls:{info:\"http://api.star.kankan.com/hit_info?jsoncallback=?\",present:\"http://backend.star.kankan.com/hit?jsoncallback=?\",dialog:\"/present_flower_dialog.html\"}},l.prototype.setDialog=function(i){this.$dialog=t(i);var o=this.dialogEvents;for(var n in o){var s=o[n];if(s)for(var a in s)this.$dialog.on(n,s[a])}},l.prototype.resetDialog=function(){this.$dialog.find(\"form\")[0].reset()},l.prototype.openDialog=function(){if(this.$dialog)p.initData(),this.$dialog.modal(\"open\");else if(this.options.urls.dialog){var t=this;n.loadHtml(this.options.urls.dialog,function(i){t.setDialog(i),i.data(\"flower\",t),p.init(i),t.openDialog()})}},l.prototype.closeDialog=function(){this.$dialog&&(this.$dialog.modal(\"close\"),this.resetDialog(),this.session=\"\")},l.prototype.on=function(t,i){var o=t.substring(0,t.indexOf(\".\")),n=t.substring(t.indexOf(\".\")+1);switch(o){case\"dlg\":if(this.$dialog)this.$dialog.on(n,i);else{var s=this.dialogEvents;s[n]||(s[n]=[]),s[n].push(i)}break;case\"flw\":this.options[n]=i}return this},l.prototype.off=function(t,i){var o=t.substring(0,t.indexOf(\".\")),n=t.substring(t.indexOf(\".\")+1);switch(o){case\"dlg\":this.$dialog&&this.$dialog.off(n,i);var s=this.dialogEvents;if(s[n])if(i){var a=s[n].indexOf(i);-1!=a&&(s[n][a]=void 0)}else s[n]=[];break;case\"flw\":this.options[n]=void 0}return this},l.prototype.success=function(t){this.options.success=t},l.prototype.fail=function(t){this.options.fail=t},l.prototype.present=function(i){if(this.validate(i)){var o=this;o.session=(new Date).getTime(),n.sendKkpgvC(\"hit\",\"post\",o.session),t.getJSON(this.options.urls.present,i,function(s){if(\"object\"!=typeof s)throw new Error(\"illegal return value\");o.info.present=i.num;var a=o.info.hold-s.data.hits;o.info.hold=s.data.hits,o.info.out=a,p.setRemainNum(+o.info.hold),200==s.status?(n.sendKkpgvC(\"hit\",\"done\",o.session),e.call(o,s),t.isFunction(o.options.success)&&o.options.success(s,o)):(n.sendKkpgvC(\"hit\",\"error\"+s.status,o.session),r.call(o,s),t.isFunction(o.options.fail)&&o.options.fail(s,o))})}},l.prototype.openPayTipDialog=function(){if(this.closeDialog(),!this.payTip){var t=this;this.payTip=new a({desc:\"您的人气值不足，开通会员可获得更多人气值哦~\",buttons:{sure:\"开通看看会员\",cancel:\"关 闭\"},success:function(){n.sendKkpgvC(\"hit\",\"pay\",t.session);var i=new s({urls:{pay_order:\"http://backend.star.kankan.com/hit_order?jsoncallback=?&\"},payDesc:\"=1年看看会员 + 给艺人加人气 = 180元\",payInfo:{type:\"hit\",payAmount:\"12\",payType:\"E\"},payEndBtnText:\"确定\",success:function(){n.sendKkpgvC(\"hit\",\"payDone\",t.session),t.openDialog()}});i.openDialog()}})}this.payTip.openDialog()},l.prototype.getFormData=function(){var t=this.$dialog.find(\"form\"),i=t.find(\"input[type=text]\").val()||t.find(\"input[type=radio]:checked\").val();return{num:i,starid:this.target.id}},l.prototype.validate=function(t){return t.starid?!o.isInteger(t.num)||t.num<=0?(alert(\"请输入合法的人气数\"),!1):!0:!1};var p={$dialog:null,init:function(t){var i=t.find(\".cancel-btn ,.btn_close\"),o=t.find(\".sure-btn\"),n=t.data(\"flower\");i.click(function(){n.closeDialog()}),o.click(function(){var t=n.getFormData();n.present(t)}),t.find(\"input:text.form_flower\").on(\"focus\",function(){t.find(\"input:radio\").attr(\"checked\",!1)}),this.$dialog=t},initData:function(){if(this.$dialog){var i=this,o=this.$dialog.data(\"flower\");this.$dialog.find(\".picture img\").attr(\"src\",o.target.portrait),this.$dialog.find(\"h2 span\").text(o.target.name),this.$dialog.find(\"input:radio[value=360]\").attr(\"checked\",!0),t.getJSON(o.options.urls.info,function(t){200==t.status&&(o.info=t.data,i.setRemainNum(o.info.hold))})}},setRemainNum:function(t){this.$dialog&&this.$dialog.find(\".remain-flower-nums\").text(t)}};return l});\ndefine([\"jquery\",\"clib/modal\",\"common/validate\",\"common/utils\"],function(t,i,e,a){function o(t){alert(\"评分成功\"),this.closeDialog()}function n(t){alert(t.data.msg)}var s=function(i){this.dialogEvents={},this.options=t.extend(!0,{},s.defaults,i),this.options.dialog&&(this.setDialog(this.options.dialog),r.init(this.$dialog)),\"object\"==typeof this.options.target&&(this.target=this.options.target)};s.defaults={urls:{grade:\"http://backend.star.kankan.com/rating?a=star&jsoncallback=?\",dialog:\"/grade_dialog.html\"}},s.prototype.setDialog=function(i){this.$dialog=t(i);var e=this.dialogEvents;for(var a in e){var o=e[a];if(o)for(var n in o)this.$dialog.on(a,o[n])}},s.prototype.resetDialog=function(){this.$dialog.find(\"form\")[0].reset(),this.$dialog.find(\"input[type=radio]\").removeAttr(\"checked\"),this.$dialog.find(\".star_bg a\").removeClass(\"active\")},s.prototype.openDialog=function(){if(this.$dialog)r.initData(this.$dialog),this.$dialog.modal(\"open\");else if(this.options.urls.dialog){var t=this;a.loadHtml(this.options.urls.dialog,function(i){t.setDialog(i),i.data(\"grade\",t),r.init(i),t.openDialog()})}},s.prototype.closeDialog=function(){this.$dialog&&(this.$dialog.modal(\"close\"),this.resetDialog(),session=\"\")},s.prototype.validate=function(t){return\"object\"!=typeof t?!1:t.targetid?!e.isInteger(t.appearance)||t.appearance>5||t.appearance<1?(alert(\"请选择颜值评分ֵ\"),!1):!e.isInteger(t.potential)||t.potential>5||t.potential<1?(alert(\"请选择潜能评分ֵ\"),!1):!0:!1},s.prototype.on=function(t,i){var e=t.substring(0,t.indexOf(\".\")),a=t.substring(t.indexOf(\".\")+1);switch(e){case\"dlg\":if(this.$dialog)this.$dialog.on(a,i);else{var o=this.dialogEvents;o[a]||(o[a]=[]),o[a].push(i)}break;case\"flw\":this.options[a]=i}return this},s.prototype.off=function(t,i){var e=t.substring(0,t.indexOf(\".\")),a=t.substring(t.indexOf(\".\")+1);switch(e){case\"dlg\":this.$dialog&&this.$dialog.off(a,i);var o=this.dialogEvents;if(o[a])if(i){var n=o[a].indexOf(i);-1!=n&&(o[a][n]=void 0)}else o[a]=[];break;case\"grd\":this.options[a]=void 0}return this},s.prototype.success=function(t){this.options.success=t},s.prototype.fail=function(t){this.options.fail=t},s.prototype.grade=function(i){if(this.validate(i)){i.appearance=s.calcGrade(i.appearance),i.potential=s.calcGrade(i.potential);var e=this;e.session=(new Date).getTime(),a.sendKkpgvC(\"grade\",\"post\",e.session),t.getJSON(this.options.urls.grade,i,function(i){if(\"object\"!=typeof i)throw new Error(\"illegal return value\");200==i.status?(a.sendKkpgvC(\"grade\",\"done\",e.session),o.call(e,i),t.isFunction(e.options.success)&&e.options.success(i,e)):(a.sendKkpgvC(\"grade\",\"error\"+i.status,e.session),n.call(e,i),t.isFunction(e.options.fail)&&e.options.fail(i,e))})}},s.calcGrade=function(t){var i=2*t;return 1>i?1:i>10?10:i},s.prototype.getAppearanceValue=function(){return s.calcGrade(this.$dialog.find(\"#starBg1 input[type=radio]:checked\").val())},s.prototype.getPotentialValue=function(){return s.calcGrade(this.$dialog.find(\"#starBg2 input[type=radio]:checked\").val())},s.prototype.getFormData=function(){var t=this.$dialog.find(\"form\"),i=a.serializeObject(t);return i.targetid=this.target.id,i};var r={$dialog:null,init:function(i){var e=i.find(\".cancel-btn ,.close-btn\"),a=i.find(\".sure-btn\"),o=i.data(\"grade\");e.click(function(){o.closeDialog()});a.click(function(){var t=o.getFormData();o.grade(t)});var n=i.find(\".star_bg\");n.mouseenter(function(){var i=t(this);i.find(\"input[type=radio]:checked\").next().removeClass(\"active\")}).mouseleave(function(){var i=t(this);i.find(\"input[type=radio]:checked\").next().addClass(\"active\")}).delegate(\"a\",\"click\",function(){var i=t(this);i.siblings(\"input[type=radio]\").removeAttr(\"checked\"),i.prev().attr(\"checked\",!0).click()}),this.$dialog=i},initData:function(){var t=this.$dialog,i=t.data(\"grade\");t.find(\".picture img\").attr(\"src\",i.target.portrait),t.find(\"h2 span\").text(i.target.name)}};return s});\ndefine([\"jquery\",\"common/utils\"],function(n,i){function e(){if(u.refresh(!0),\"function\"==typeof u.gLoginSuccess)try{u.gLoginSuccess()}catch(i){}try{n(\"#\"+s).css(\"left\",\"\")}catch(i){}}function o(){if(u.refresh(!0),\"function\"==typeof u.gAutoLoginSuccess)try{u.gAutoLoginSuccess()}catch(n){}}function t(){if(\"function\"==typeof u.gLoginClose)try{u.gLoginClose()}catch(i){}try{n(\"#\"+s).css(\"left\",\"\")}catch(i){}}function c(){if(u.refresh(!1),\"function\"==typeof u.gLogoutSuccess)try{u.gLogoutSuccess()}catch(n){}}var s=\"playerbox\",u={},l={login:[],logout:[],check_backend:[]};return u.on=function(n,i){l[n]||(l[n]=[]),l[n].push(i)},u.trigger=function(i,e){if(l[i])for(var o,t=0,c=l[i].length;c>t;t++)o=l[i][t],n.isFunction(o)&&o(e)},u.addLoginCallback=function(n){u.on(\"login\",n)},u.addLogoutCallback=function(n){u.on(\"logout\",n)},u.addCheckBackendCallback=function(n){u.on(\"check_backend\",n)},u.autoLogin={init:function(){require([\"http://u.kankan.com/login/1.0.4.min.js\"],function(){xlQuickLogin.init({loginID:\"107\",autoClientLogin:!0,closeFunc:function(){try{t()}catch(n){}},loginFunc:function(){try{e()}catch(n){}},loginedFunc:function(){try{o()}catch(n){}},logoutFunc:function(){try{c()}catch(n){}}})})}},u.userInfo={userid:0,nick_name:\"\",is_vip:0,is_star:0,is_investor:0,logined:0,login:function(){var n=i.cookie.get(\"userid\"),e=i.cookie.get(\"sessionid\");this.userid=n?n:0,this.userid>0&&\"\"!=e&&(this.nick_name=decodeURIComponent(i.cookie.get(\"usernick\")),this.logined=1),this.checkBackend(),u.trigger(\"login\")},logout:function(){var n=i.cookie;n.del(\"usernewno\"),n.del(\"sessionid\"),n.del(\"state\"),n.del(\"logintype\"),n.del(\"upgrade\"),n.del(\"userid\"),n.del(\"jumpkey\"),n.del(\"score\"),n.del(\"isvip\"),n.del(\"deviceid\"),n.del(\"usernick\"),n.del(\"_x_t\"),n.del(\"usertype\"),n.del(\"usrname\"),n.del(\"shapsw\"),n.del(\"lsessionid\"),n.del(\"luserid\"),n.del(\"nickname\"),n.del(\"uservip\"),this.userid=0,this.nick_name=\"\",this.is_vip=0,this.is_star=0,this.is_investor=0,this.logined=0,delete this.star_info,delete this.hit_info,u.trigger(\"logout\"),u.trigger(\"check_backend\")},setNick:function(n){n&&(this.nick_name=n)},checkBackend:function(){var i=this,e=\"http://backend.star.kankan.com/userchecker?jsoncallback=?\";n.getJSON(e,function(e){200==e.status&&(n.extend(i,e.data),u.trigger(\"check_backend\"))})}},u.login={dialog:\"login_dialog.html\",logout:function(){return\"undefined\"==typeof window.xlQuickLogin?void setTimeout(function(){u.login.logout()},100):void xlQuickLogin.logout()},show:function(){if(\"undefined\"==typeof window.xlQuickLogin)return void setTimeout(function(){u.login.show()},100);xlQuickLogin.login(),\"function\"==typeof u.gLoginBefore&&u.gLoginBefore();try{n(\"#\"+s).css(\"left\",\"-9999em\")}catch(i){}}},u.refresh=function(n){n?u.userInfo.login():u.userInfo.logout()},u});\ndefine([\"jquery\",\"clib/modal\",\"common/validate\",\"common/utils\",\"common/pay\",\"common/tip\"],function(t,i,o,n,s,e){function a(t){200==t.status?(this.closeDialog(),r.options.desc=\"感谢您投资\"+this.target.name+\"，我们将在七个工作日内与您联系，办理后续事宜\",r.openDialog()):alert(t.data.msg)}function l(t){alert(t.data.msg)}var r=new e({buttons:{sure:\"关 闭\"}}),c=new e({desc:\"成为看看会员即可投资您喜欢的艺人，并获得收益。\",buttons:{sure:\"开通看看会员\",cancel:\"关 闭\"}}),d=function(i){this.dialogEvents={},this.options=t.extend(!0,{},d.defaults,i),this.options.dialog&&(this.setDialog(this.options.dialog),p.init(this.$dialog)),\"object\"==typeof this.options.target&&(this.target=this.options.target)};d.defaults={urls:{info:\"http://api.star.kankan.com/investor_info?a=info&jsoncallback=?\",invest:\"http://backend.star.kankan.com/invest?jsoncallback=?\",dialog:window.location.protocol+\"//\"+window.location.host+\"/invest_dialog.html\"},success:function(t){},fail:function(t){}},d.prototype.setDialog=function(i){this.$dialog=t(i);for(var o in this.dialogEvents)this.$dialog.on(o,this.dialogEvents[o])},d.prototype.on=function(t,i){var o=t.substring(0,t.indexOf(\".\")),n=t.substring(t.indexOf(\".\")+1);switch(o){case\"dlg\":if(this.$dialog)this.$dialog.on(n,i);else{var s=this.dialogEvents;s[n]||(s[n]=[]),s[n].push(i)}break;case\"ivs\":this.options[n]=i}return this},d.prototype.off=function(t,i){var o=t.substring(0,t.indexOf(\".\")),n=t.substring(t.indexOf(\".\")+1);switch(o){case\"dlg\":this.$dialog&&this.$dialog.off(n,i);var s=this.dialogEvents;if(s[n])if(i){var e=s[n].indexOf(i);-1!=e&&(s[n][e]=void 0)}else s[n]=[];break;case\"ivs\":this.options[n]=void 0}return this},d.prototype.resetDialog=function(){this.$dialog.find(\"form\")[0].reset()},d.prototype.openDialog=function(){if(this.$dialog)p.initData(),this.$dialog.modal(\"open\");else if(this.options.urls.dialog){var t=this;n.loadHtml(this.options.urls.dialog,function(i){t.setDialog(i),i.data(\"invest\",t),p.init(i),t.openDialog()})}},d.prototype.closeDialog=function(){this.$dialog&&(this.$dialog.modal(\"close\"),this.resetDialog(),this.session=\"\")},d.prototype.success=function(t){this.options.success=t},d.prototype.fail=function(t){this.options.fail=t},d.prototype.investor=function(t){var i=this;i.session=(new Date).getTime(),t?i.openDialog():(c.success(function(){n.sendKkpgvC(\"invest\",\"pay\",i.session);var t=new s({payDesc:\"=1年看看会员 + 艺人投资权 = 180元\",payInfo:{type:\"investor\",payAmount:\"12\",payType:\"E\"},payEndBtnText:\"下一步\",success:function(){n.sendKkpgvC(\"invest\",\"payDone\",i.session),i.openDialog()},fail:function(){}});t.openDialog()}),c.openDialog())},d.prototype.invest=function(i){if(this.validate(i)){var o=this;n.sendKkpgvC(\"invest\",\"post\",o.session),t.getJSON(this.options.urls.invest,i,function(i){if(\"object\"!=typeof i)throw new Error(\"illegal return value\");200==i.status?(n.sendKkpgvC(\"invest\",\"done\",o.session),a.call(o,i),t.isFunction(o.options.success)&&o.options.success(i,o)):(n.sendKkpgvC(\"invest\",\"error\"+i.status,o.session),l.call(o,i),t.isFunction(o.options.fail)&&o.options.fail(i,o))})}},d.prototype.validate=function(t){return\"object\"!=typeof t?!1:t.targetid?o.required(t.name)?o.isIdCard(t.identity)?!o.isNumeric(t.num)||t.num<=0?(alert(\"请输入合法的金额\"),!1):o.isCellphone(t.contact)?!0:(alert(\"请输入正确的手机号码\"),!1):(alert(\"请输入正确的身份证号码\"),!1):(alert(\"请输入名字\"),!1):!1},d.prototype.getFormData=function(){var t=this.$dialog.find(\"form\"),i=n.serializeObject(t);return i.targetid=this.target.id,i};var p={$dialog:null,init:function(t){var i=t.find(\".cancel-btn ,.close-btn\"),o=t.find(\".sure-btn\"),n=t.data(\"invest\");i.click(function(){n.closeDialog()}),o.click(function(){var t=n.getFormData();n.invest(t)}),this.$dialog=t},initData:function(){if(this.$dialog){var i=this,o=this.$dialog.data(\"invest\");this.$dialog.find(\".picture img\").attr(\"src\",o.target.portrait),this.$dialog.find(\"h2 span\").text(o.target.name),t.getJSON(o.options.urls.info,function(t){if(200==t.status){var o=t.data.investor_info||{},n=i.$dialog.find(\"form[name=iv_form]\");n.find(\"input[name=name]\").val(o.name),n.find(\"input[name=identity]\").val(o.identity),n.find(\"input[name=contact]\").val(o.contact),n.find(\"input[name=money]\").val(o.money)}})}}};return d});\ndefine([\"jquery\",\"clib/modal\",\"common/utils\"],function(t,i,n){var o={urls:{pay_order:\"http://backend.star.kankan.com/user_order?jsoncallback=?&\",pay_submit:\"http://busi.vip.kankan.com/pay/submit?\",pay_verifyOrder:\"http://busi.vip.kankan.com/pay/verifyOrder?rand=\",dialog:\"/pay_dialog.html\"},payDesc:\"\",payEndBtnText:\"确定\",payInfo:{type:\"\",amount:{1:\"2000\",3:\"4500\",12:\"18000\"},bizNo:\"000001032\",handler:\"CXKJ\",refId:\"fref_%252Ccxkj%253B%253B\",payAmount:\"12\",payType:\"E\"},success:function(){},fail:function(){}},a=n.cookie,e=\"\",s=function(i){return this.doneList=[],this.failList=[],this.state=\"pending\",t.isFunction(i)&&(i=new i),t.extend(i,this),i};s.prototype={constructor:\"Promise\",resolve:function(){this.state=\"resolved\";for(var t=this.doneList,i=0,n=t.length;n>i;i++)t[i].call(this)},reject:function(){this.state=\"rejected\";for(var t=this.failList,i=0,n=t.length;n>i;i++)t[i].call(this)},done:function(t){return\"function\"==typeof t&&this.doneList.push(t),this},fail:function(t){return\"function\"==typeof t&&this.failList.push(t),this},always:function(t){return this.done(t).fail(t),this}};var d=function(i){this.options=t.extend(!0,{},o,i);var n=this.options.payInfo;if(!n.amount[n.payAmount])throw\"error\";this.options.dialog&&(this.setDialog(this.options.dialog),this.$dialog.data(\"pay\",this),l.init(this.$dialog))};d.prototype.setDialog=function(i){this.$dialog=t(i)},d.prototype.resetDialog=function(){},d.prototype.openDialog=function(){var t=this;return t.$dialog?void t.$dialog.modal(\"open\"):void(t.options.urls.dialog&&n.loadHtml(t.options.urls.dialog,function(i){t.setDialog(i),i.data(\"pay\",t),l.init(i),t.openDialog()}))},d.prototype.closeDialog=function(){var t=this;t.$dialog&&(t.$dialog.modal(\"close\"),t.resetDialog())};var c=new s(function(){var i=this,o=!1,s=null;this.init=function(a){function d(){s.find(\"#desc\").children(\"span\").text(p).parent(\"dt\").siblings(\"dd\").find(\".totalCount\").text(r.amount[r.payAmount]/100+\"元\")}var c=a.options.urls,r=a.options.payInfo,p=a.options.payDesc;s=a.$dialog.find(\"#quickPayBox\"),\"hit\"==r.type&&s.find(\".js_numFlower\").show().on(\"click\",\"dd input[type=radio]\",function(){t(this).attr(\"checked\",!0).parent(\"dd\").addClass(\"on\").siblings(\"dd\").removeClass(\"on\"),r.payAmount=t(this).parent(\"dd\").attr(\"data\")}).find(\"dd[data=\"+r.payAmount+\"] input[type=radio]\").click(),s.find(\".js_payType\").on(\"click\",\"dd input[type=radio]\",function(){var i=t(this).parent(\"dd\");i.addClass(\"on\").siblings(\"dd\").removeClass(\"on\"),\"B2\"==i.attr(\"data\")?s.find(\".js_bankList\").show().find(\"dd a.choseBank\").on(\"click\",function(){t(this).siblings(\"ul\").show()}).siblings(\"ul\").find(\"a\").on(\"click\",function(){var i=t(this).text();t(this).parents(\"ul\").hide().siblings(\"a\").html(i+\"<b></b>\").attr(\"data\",t(this).attr(\"data\"))}):s.find(\".js_bankList\").hide().find(\"ul\").hide(),r.payType=t(this).parent().attr(\"data\")}).find(\"dd[data=\"+r.payType+\"] input[type=radio]\").click(),n.watch.add(function(){return r.payAmount},d),d(),s.find(\".pay_btn a\").on(\"click\",function(){return o?!1:(o=!0,void t.getJSON(c.pay_order+\"type=\"+r.type,function(n){if(200==n.status&&n.data&&n.data.randid){var a={type:r.type,month:r.payAmount,needAmount:r.amount[r.payAmount],bizNo:r.bizNo,handler:r.handler,refId:r.refId,payType:r.payType};\"B2\"==a.payType&&(a.bankNo=s.find(\".js_bankList .choseBank\").attr(\"data\").toUpperCase()),e=a.rand=n.data.randid,window.open(c.pay_submit+t.param(a)),o=!1,i.resolve()}else alert(\"访问出错，请刷新\")}))}),s.find(\".pay_top a\").on(\"click\",function(){i.reject()})},this.show=function(){s.show().find(\"#quickPayNickid\").text(a.get(\"userid\")).siblings(\"#quickPayNickname\").text(\"(\"+a.get(\"usernick\")+\")\")},this.hide=function(){s.hide()}}),r=new s(function(){var i=this,n='<b class=\"ico_exclamation\"></b><p style=\"padding-left:94px;\"><strong>请您在新打开的页面上完成付款</strong></p><p style=\"padding-left:94px;font-size:12px;\">支付完成前请不要关闭窗口</p><p style=\"padding-left:94px;font-size:12px;\">支付完成后请根据结果选择</p>',o='<p style=\"text-align:center;\"><strong>支付还未成功</strong></p><p style=\"text-align:center;\">您的支付过程还没有完成</p><p style=\"text-align:center;\">可能是由于系统延迟，请稍后查询</p>',a=null;this.init=function(s){function d(i){var n=t.Deferred();return t.ajax({dataType:\"jsonp\",url:c.pay_verifyOrder+i,type:\"get\",success:function(t){0==t.rtn&&1==t.data.paid?n.resolve():n.reject()},error:function(){n.reject()}}),n.promise()}var c=s.options.urls;a=s.$dialog.find(\"#quickCheckBox\");var r;a.find(\".pay_btn a.query\").click(function(){r=this,t.when(d(e)).done(function(){i.resolve()}).fail(function(){a.find(\".pay_content\").html(o),t(r).text(\"再试一次\")})}),a.find('.pay_btn a[title=\"取消\"], #quickCheckBoxTitle a').click(function(){a.find(\".pay_content\").html(n),t(r).text(\"支付成功\"),i.reject()})},this.show=function(){a.show()},this.hide=function(){a.hide()}}),p=new s(function(){var t=this,i=null;this.init=function(n){i=n.$dialog.find(\"#quickPayOkbox\"),i.find(\".pay_btn a\").click(function(){t.resolve()}).text(n.options.payEndBtnText)},this.show=function(){i.show()},this.hide=function(){i.hide()}}),l={init:function(i){var n=i.data(\"pay\");c.init(n),r.init(n),p.init(n),c.show(),c.always(function(){c.hide()}).done(function(){r.show()}).fail(function(){n.closeDialog(),t.isFunction(n.options.fail)&&n.options.fail()}),r.always(function(){r.hide()}).done(function(){p.show()}).fail(function(){n.closeDialog(),t.isFunction(n.options.fail)&&n.options.fail()}),p.always(function(){n.closeDialog(),t.isFunction(n.options.success)&&n.options.success()})}};return d});\ndefine([\"jquery\"],function(t){var e=function(e,n){this.id=e,this.options=t.extend(!0,{},r,n)},r={urls:{searchUrl:\"\",gradeInfoUrl:\"http://api.star.kankan.com/star_info?a=rating\"}};return e.search=function(t){var e=[];for(var n in t)t[n]&&e.push(n+\"=\"+t[n]);location.href=r.urls.searchUrl+\"?\"+e.join(\"&\")},e.calcIntegrity=function(t){var e=0;return t.name&&t.name.trim().length&&(e+=10),t.sex&&(e+=10),parseInt(t.year)&&parseInt(t.month)&&parseInt(t.day)&&(e+=10),t.cover_folder&&t.cover_folder.trim().length&&t.cover_name&&t.cover_name.trim().length&&(e+=20),t.nationality&&(e+=5),t.province&&t.province.trim().length&&t.city&&t.city.trim().length&&(e+=5),t.college&&t.college.trim().length&&(e+=5),t.profession&&t.profession.trim().length&&(e+=5),t.stature&&t.stature.trim().length&&(e+=10),t.weight&&(e+=10),t.style&&(e+=5),t.speciality&&t.speciality.trim().length&&(e+=5),e},e.prototype.loadGradeInfo=function(e){var r=this;t.ajax({url:r.urls.gradeInfoUrl,dataType:\"jsonp\",data:{userid:this.id},method:\"GET\",jsonp:\"jsoncallback\",success:function(n){200==n.status&&t.isFunction(e)&&e(n,r)}})},e});\ndefine([\"jquery\"],function(r){var n=function(n,e){this.id=n,this.options=r.extend(!0,{},i,e)},i={urls:{searchUrl:\"\"}};return n.search=function(r){var n=[];for(var e in r)r[e]&&n.push(e+\"=\"+r[e]);location.href=i.urls.searchUrl+\"?\"+n.join(\"&\")},n});\ndefine([\"jquery\",\"clib/modal\",\"clib/player\",\"common/utils\"],function(i,n,t,o){var a={container:\"_player\",width:\"100%\",height:\"100%\",title:\"视频欣赏\",flashVars:{id:\"PlayerCtrl\",mid:\"\"}},e=function(n){function e(i){t.printObject(s.options.container,s.options.width,s.options.height,s.options.flashVars),c=(new Date).getTime()}function d(i){t.destroyObject(),p=!0,c=\"\"}var s=this;this.options=i.extend(!0,{},a,n),this.dialogEvents={},this.$dialog=null;var r='<div class=\"pop\" style=\"display:;width:896px;margin-left:-466px;\"><h2>视频欣赏</h2><a class=\"btn_close\" href=\"javascript:void(0)\" title=\"关闭\" target=\"_self\">关闭弹窗</a><div class=\"pop_inner\"><div id=\"'+this.options.container+'\"class=\"pop_video\" style=\"width:850px;height:450px;\"></div><div class=\"error\" style=\"display:none;width:850px;height:450px;\" id=\"playerError\"></div></div></div>';this.init=function(n){window.swfobject?s.$dialog||(s.$dialog=i(r).hide().appendTo(i(\"body\")),s.$dialog.data(\"talentPlayer\",s),s.$dialog.on(\"beforeOpen\",e),s.$dialog.on(\"afterClose\",d),l.init(s.$dialog),i.isFunction(n)&&n()):require([\"http://js.kankan.xunlei.com/js/sbase.js\"],function(){s.init(n)})},this.on=function(i,n){var t;i.startsWith(\"dlg\")&&(t=s.dialogEvents);var o=i.substring(i.indexOf(\".\")+1);t[o]=n,s.$dialog&&s.$dialog.on(o,n)},this.play=function(i,n){return s.options.flashVars.mid=i,s.options.title=n,s.$dialog?void s.openDialog():void s.init(s.openDialog)},this.openDialog=function(){s.$dialog&&(l.initData(),s.$dialog.modal(\"open\"))},this.closeDialog=function(){s.$dialog&&s.$dialog.modal(\"close\")};var p=!0,c=\"\";t.on(\"onOpen\",function(){o.sendKkpgvC(\"player\",\"vopen\",t.videoID,c)}),t.on(\"onPlaying\",function(){p&&(o.sendKkpgvC(\"player\",\"vplay\",t.videoID,c),p=!1)}),t.on(\"onEnd\",function(){o.sendKkpgvC(\"player\",\"vend\",t.videoID,c)})},l={$dialog:null,init:function(i){var n=i.data(\"talentPlayer\"),t=i.find(\".cancel-btn ,.btn_close\");t.click(function(){i&&n.closeDialog()}),this.$dialog=i},initData:function(){if(this.$dialog){var i=this.$dialog.data(\"talentPlayer\");this.$dialog.find(\"h2\").text(i.options.title)}}};return e});\ndefine([\"jquery\",\"clib/modal\",\"common/utils\"],function(i,t,o){var s=function(t){this.options=i.extend(!0,{},s.defaults,t),this.options.dialog&&(this.setDialog(this.options.dialog),n.init(this.$dialog))};s.defaults={urls:{dialog:\"/tip_dialog.html\"},title:\"温馨提示\",desc:\"\",buttons:{cancel:\"\",sure:\"\"}},s.prototype.setDialog=function(t){this.$dialog=i(t)},s.prototype.openDialog=function(){if(this.$dialog)n.initData(),this.$dialog.modal(\"open\");else if(this.options.urls.dialog){var i=this;o.loadHtml(this.options.urls.dialog,function(t){i.setDialog(t),t.data(\"tip\",i),n.init(t),i.openDialog()})}},s.prototype.closeDialog=function(){this.$dialog&&this.$dialog.modal(\"close\")},s.prototype.success=function(i){this.options.success=i},s.prototype.fail=function(i){this.options.fail=i};var n={$dialog:null,init:function(t){var o=t.find(\".cancel-btn ,.close-btn\"),s=t.find(\".sure-btn\"),n=t.data(\"tip\");n.options.buttons.cancel?o.click(function(){n.closeDialog(),i.isFunction(n.options.fail)&&n.options.fail(n,o)}).text(n.options.buttons.cancel).show():o.hide(),n.options.buttons.sure?s.click(function(){n.closeDialog(),i.isFunction(n.options.success)&&n.options.success(n,s)}).text(n.options.buttons.sure).show():s.hide(),this.$dialog=t},initData:function(){if(this.$dialog){var i=this.$dialog.data(\"tip\");this.$dialog.find(\"#oneWordTitle\").text(i.options.title),this.$dialog.find(\"#oneWordContent\").text(i.options.desc)}}};return s});\ndefine([],function(){function n(n){switch(n){case\"hit\":return\"人气\";case\"invest\":return\"投资\";case\"upgrade\":return\"升级\";case\"article\":return\"通告\";case\"rating\":return\"评分\";default:return\"其他\"}}function a(n){return n>=1e4?n%1e4?(n/1e4).toFixed(1)+\"万\":n/1e4+\"万\":n}function s(s){var t,e=n(s.type);switch(s.action){case\"buy_hits\":return t=\"购买了\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\"<b>\"+a(s.num)+\"</b>人气</span></li>\";case\"in_hits\":return t=\"收到了\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\" \"+s.target_name+\" 赠送的<b>\"+a(s.num)+\"</b>人气</span></li>\";case\"out_hits\":return t=\"赠送了\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\" \"+s.target_name+\" <b>\"+a(s.num)+\"</b>人气</span></li>\";case\"in_invests\":return t=\"接受了\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\" \"+s.target_name+\" <b>\"+a(s.num)+\"</b>元人民币的投资</span></li>\";case\"out_invests\":return t=\"投资了\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\" \"+s.target_name+\" <b>\"+a(s.num)+\"</b>元人民币</span></li>\";case\"upgrade\":return t=s.ext,\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\"</span></li>\";case\"in_rating\":return t=\"收到了\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\" \"+s.target_name+\" \"+s.ext+\"的评价</span></li>\";case\"out_rating\":return t=\"给予\",\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\" \"+s.target_name+\" \"+s.ext+\"分的评价</span></li>\";case\"article\":return t=s.ext,\"<li><span>\"+s.time+\"</span><span class='intro'>【\"+e+\"】\"+t+\"</span></li>\";default:return\"\"}}return{userActionMsg:s}});\ndefine([\"jquery\"],function(n){function e(n,e){return n+Math.round(Math.random()*(e-n))}function t(){var n=window.location.href,e=n.split(\"#\");return n.indexOf(\"?\")>0?window.location=e[0]+\"&rd=\"+this.time():window.location=e[0]+\"?rd=\"+this.time(),!0}function i(){try{var n=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\");return n.getVariable(\"$version\").split(\" \")[1].split(\",\")}catch(e){for(var t=navigator.plugins,i=t.length-1;i>=0;i--)try{if(-1!=t[i].name.indexOf(\"Shockwave Flash\"))return t[i].description.match(/\\d+/g)}catch(e){}}finally{n=null}}function o(e,t){var i=n(\"<div>\");i.load(e,function(){i=n(i.html()),n(document.body).append(i),n.isFunction(t)&&t(i)})}function a(e){var t=n(e).serializeArray(),i={};for(var o in t)i[t[o].name]=t[o].value;return i}function r(){function e(n,e){n.once=e,i.push(n),o||(o=!0,a=setInterval(t,100))}function t(){n.each(i,function(n,e){var t=e.watchFn(),o=e.last;t!==o&&(e.once&&i.slice(n,1),e.listenerFn(t,o)),e.last=t}),0===i.length&&(clearInterval(a),o=!1)}var i=[],o=!1,a=0;this.add=function(n,t){var i={watchFn:n,listenerFn:t||function(){},last:n()};e(i,!1)},this.addOnce=function(n,t){var i={watchFn:n,listenerFn:t||function(){},last:n()};e(i,!0)}}function c(e,t){var i=n(e);return i.data(\"old-text\",i.html()),null!==t&&void 0!==t&&i.html(t),i.prop(\"disabled\",!0).addClass(\"disabled\"),i}function l(e){var t=n(e);return t.prop(\"disabled\",!1).removeClass(\"disabled\").html(t.data(\"old-text\")),t}function s(){this.get=function(n){try{return null==document.cookie.match(new RegExp(\"(^\"+n+\"| \"+n+\")=([^;]*)\"))?\"\":decodeURIComponent(RegExp.$2)}catch(e){return\"\"}},this.del=function(n,e){var t=new Date((new Date).getTime()),e=e?e:-1!=window.location.host.indexOf(\"xunlei.com\")?\"xunlei.com\":\"kankan.com\";document.cookie=n+\"= ; path=/; domain=\"+e+\"; expires=\"+t.toGMTString()},this.set=function(n,e,t,i){var i=i?i:-1!=window.location.host.indexOf(\"xunlei.com\")?\"xunlei.com\":\"kankan.com\";if(arguments.length>2){var o=new Date((new Date).getTime()+36e5*t);document.cookie=n+\"=\"+encodeURIComponent(e)+\"; path=/; domain=\"+i+\"; expires=\"+o.toGMTString()}else document.cookie=n+\"=\"+encodeURIComponent(e)+\"; path=/; domain=\"+i}}function u(e,t,i){if(!n(\"#\"+e).length){n(\"<iframe>\").attr(\"name\",e).attr(\"id\",e).attr(\"width\",0).attr(\"height\",0).attr(\"src\",t).attr(\"scrolling\",\"no\").css(\"display\",\"none\").on(\"load\",i).appendTo(\"body\")}}function d(n){return n>=1e4?n%1e4?(n/1e4).toFixed(1)+\"万\":n/1e4+\"万\":n}function h(n,e,t,i,o){window.frames[n].sendJSON.creatReq(e,t,i||function(){},o)}function m(e,t){return n(e).children(\"[value=\"+t+\"]\").text()}function f(n){var e=0;return n.name&&n.name.trim().length&&(e+=10),n.sex&&(e+=10),parseInt(n.year)&&parseInt(n.month)&&parseInt(n.day)&&(e+=10),n.cover_folder&&n.cover_folder.trim().length&&n.cover_name&&n.cover_name.trim().length&&(e+=20),n.nationality&&(e+=5),n.province&&n.province.trim().length&&n.city&&n.city.trim().length&&(e+=5),n.college&&n.college.trim().length&&(e+=5),n.profession&&n.profession.trim().length&&(e+=5),n.stature&&n.stature.trim().length&&(e+=10),n.weight&&(e+=10),n.style&&(e+=5),n.speciality&&n.speciality.trim().length&&(e+=5),e}function p(n){var e=new Image(1,1);e.onerror=function(){},e.src=n}function g(){for(var n=arguments,e=\"?u=kkstar\",t=0,i=n.length;i>t;t++)e+=\"&u\"+(t+1)+\"=\"+(\"undefined\"!=typeof n[t]?n[t]:\"\");e+=\"&rd=\"+(new Date).getTime();var o=\"http://kkpgv2.xunlei.com/\"+e;p(o)}function v(){for(var n=arguments,e=[],t=0,i=n.length;i>t;t++)e.push(n[t]);e.push(w.get(\"userid\")),e.push(window.location.href),e.push(w.get(\"KANKANWEBUID\"));var o=this;return setTimeout(function(){g.apply(o,e)},0)}var w=new s;return{formatNumber:d,random:e,pageRefresh:t,flashVersion:i,loadHtml:o,serializeObject:a,createBK4KKIfr:u,ajaxBK4KK:h,watch:new r,cookie:w,enableBtn:l,disableBtn:c,calcIntegrity:f,getSelectText:m,moneyFormat:d,sendStat:p,sendKkpgv:g,sendKkpgvC:v}});\ndefine([],function(){function r(r){if(!/^[0-9]{6}$/.test(r))return!1;var n,t;return n=r.substring(0,4),t=r.substring(4,6),1700>n||n>2500?!1:((1>t||t>12)&&returnfalse,!0)}function n(r){if(!/^[0-9]{8}$/.test(r))return!1;var n,t,i;n=r.substring(0,4),t=r.substring(4,6),i=r.substring(6,8);var e=[31,28,31,30,31,30,31,31,30,31,30,31];return 1700>n||n>2500?!1:((n%4==0&&n%100!=0||n%400==0)&&(e[1]=29),(1>t||t>12)&&returnfalse,1>i||i>e[t-1]?!1:!0)}var t={required:function(r){return r.replace(/(^\\s*)|(\\s*$)/g,\"\").length>0},isEmail:function(r){var n=/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return n.test(r)},isNumeric:function(r){var n=/^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/;return n.test(r)},isInteger:function(r){var n=/^\\d+$/;return n.test(r)},isCellphone:function(r){var n=/^1[0-9]{10}$/;return n.test(r)},isIdCard:function(t){var e,u=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1),s=new Array(\"1\",\"0\",\"X\",\"9\",\"8\",\"7\",\"6\",\"5\",\"4\",\"3\",\"2\"),a=new Array,f=0,c=t.length,o=t;if(15!=c&&18!=c)return!1;for(i=0;i<c;i++){if(a[i]=o.charAt(i),(a[i]<\"0\"||a[i]>\"9\")&&17!=i)return!1;i<17&&(a[i]=a[i]*u[i])}if(18==c){var g=o.substring(6,14);if(0==n(g))return!1;for(i=0;i<17;i++)f+=a[i];if(e=s[f%11],a[17]!=e)return!1}else{var v=o.substring(6,12);if(0==r(v))return!1}return!0}};return t});\n//# sourceMappingURL=../maps/js/app.js.map\n//# sourceMappingURL=../maps/js/app.js.map"],"file":"js/app.js","sourceRoot":"/source/"}